<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>_(Wireless Setup)_ - _(Advanced Settings)_</title>
  <link href="css/basic.css" rel="stylesheet" type="text/css" />
  <SCRIPT LANGUAGE="JavaScript" SRC="js/functions.js" TYPE="text/javascript"></SCRIPT>
  <script language="JavaScript" src="js/nav.js"></script>
  <script language="JavaScript" src="js/htmldecode.js"></script>
  <script language="JavaScript" src="js/util.js"></script>
  <script language="Javascript">
  
  // Globle vars definition
  var wlIndex = '<%ejGetOther(wlBandFrequency)%>';// initial default selection of band frequency.
  var gv_cssid = htmlDecodeStr('<%ejGetWl(glbSsidChanged)%>');
  var has_QTN = htmlDecodeStr("<%ejGet(qtnExist)%>");
  var wlChipOk = htmlDecodeStr("<%ejGetWl(wlChipOk_wl0)%>");

  var gv_vmode;
  var gv_gmode;
  var gv_nmode;
  var gv_nreqd;
  var gv_nbwcap;
  var gv_nCtrlsb;
  var gv_ampdu;
  var gv_amsdu;
  var gv_wme;
  var gv_wmeApsd;
  var gv_channel;
  var gv_txPwrPcnt;
  var oldchannel;
  var gv_runTimeAcs;
  var oldRunTimeAcs;

  var gv_band = new Array(2);
      gv_band[0] = "2";   // htmlDecodeStr('<%ejGetWl(wlBand_wl0)%>');
      gv_band[1] = "1";  // htmlDecodeStr('<%ejGetWl(wlBand_wl1)%>');
  var gv_ap_status = new Array(2);
      gv_ap_status[0] = htmlDecodeStr("<%ejGetWl(wlRadio_wl0)%>");
      gv_ap_status[1] = htmlDecodeStr("<%ejGetWl(wlRadio_wl1)%>");
  var gv_currentchannel = htmlDecodeStr("<%ejGetWl(wlCurrentChannel)%>");

  var gv_dfsHour = "00";
  var gv_dfsMin = "00";
  var gv_dfsSec = "00";
  var gv_maintWindowStart;

  var abs_action = "0";
  var sessionKey='<%ejGetOther(sessionKey)%>';

  function init_orig_vars()
  {
      var i = wlIndex;
      var tmp;
      var strs= new Array();
      if(gv_band[i] == "1")
      {
          gv_vmode = document.getElementById("uiPostvMode_"+i).value;
          oldchannel = htmlDecodeStr("<%ejGetWl(wlChannel_wl1)%>");
          gv_currentchannel = htmlDecodeStr("<%ejGetWl(wlCurrentChannel_wl1)%>");
      }
      else
      {
          gv_gmode = document.getElementById("uiPostbgMode_"+i).value;
          oldchannel = htmlDecodeStr("<%ejGetWl(wlChannel_wl0)%>");
          gv_currentchannel = htmlDecodeStr("<%ejGetWl(wlCurrentChannel_wl0)%>");
      }
      gv_runTimeAcs = document.getElementById("uiPostRunTimeAcs_"+i).value;
      oldRunTimeAcs = document.getElementById("uiPostRunTimeAcs_"+i).value;
      gv_dfsReEntry = document.getElementById("uiPostDfsReEntry_"+i).value;
      gv_maintWindowStart = document.getElementById("uiPostDfsReEntryStartTime_"+i).value;
      tmp = gv_maintWindowStart;
      strs = tmp.split(":");
      gv_dfsHour = strs[0];
      gv_dfsMin = strs[1];
      gv_dfsSec = strs[2];
      gv_nmode = document.getElementById("uiPostnMode_"+i).value;
      gv_nreqd = document.getElementById("uiPostnReqd_"+i).value;
      gv_nbwcap = document.getElementById("uiPostnBwCap_"+i).value;
      gv_nCtrlsb = document.getElementById("uiPostnCtrlsb_"+i).value;
      gv_ampdu = document.getElementById("uiPostampdu_"+i).value;
      gv_amsdu = document.getElementById("uiPostamsdu_"+i).value;
      gv_wme     = document.getElementById("uiPostWme_"+i).value;
      gv_wmeApsd = document.getElementById("uiPostWmeApsd_"+i).value;
      gv_channel   = document.getElementById("uiPostChannel_"+i).value;
      gv_txPwrPcnt = document.getElementById("uiPostTxPwrPcnt_"+i).value;
  }

  function uiset_section_wlIndex()
  {
      if (wlIndex == "0" || has_QTN == "0") // swith to 2.4G
      {
          document.getElementById("id_wl_5").checked = false;
          if (has_QTN == "0")
              document.getElementById("id_wl_5").disabled = true;
          document.getElementById("id_wl_2").checked = true;
      }
      else
      {
          document.getElementById("id_wl_5").checked = true;
          document.getElementById("id_wl_2").checked = false;
      }

      if(wlChipOk == "0")
          document.getElementById("id_wl_2").disabled = true;
  }

  function disable_all_nmode_input()
  {
      document.getElementById("id_channel_width").disabled = true;
      document.getElementById("id_control_channel").disabled = true;
      document.getElementById("id_msdu_agg").disabled = true;
      document.getElementById("id_mpdu_agg").disabled = true;
  }

  function enable_all_nmode_input()
  {
      document.getElementById("id_channel_width").disabled = false;
      document.getElementById("id_control_channel").disabled = false;
      document.getElementById("id_msdu_agg").disabled = false;
      document.getElementById("id_mpdu_agg").disabled = false;
  }

function uiset_section_gmode()
{
    if(gv_nmode == "off")
    {
        if (gv_gmode == "0" )
        { //802.11b
            document.getElementById("id_80211_mode")[5].selected = true;
        }
        else if (gv_gmode == "2" )
        { //802.11g
            document.getElementById("id_80211_mode")[4].selected = true;
        }
        else if (gv_gmode == "1" )
        { //802.11b&g
            document.getElementById("id_80211_mode")[3].selected = true;
        }
        else
        {
            document.getElementById("id_80211_mode")[3].selected = true;
            gv_gmode = "1";
        }
        disable_all_nmode_input();
    }
    else
    {
        if(gv_nreqd == "1")
        { //802.11n
            document.getElementById("id_80211_mode")[2].selected = true;
        }
        else
        {
            if (gv_gmode == "2" )
            { //802.11g&n
                document.getElementById("id_80211_mode")[1].selected = true;
            }
            else if (gv_gmode == "1" )
            { //802.11b&g&n
                document.getElementById("id_80211_mode")[0].selected = true;
            }
            else
                document.getElementById("id_80211_mode")[0].selected = true;
        }
        enable_all_nmode_input();
    }
}

function uiset_section_amode()
{
    if(gv_vmode == "1")
    {
        document.getElementById("id_80211_mode")[0].selected = true;
    }
    else
    {
        document.getElementById("id_80211_mode")[1].selected = true;
    }
    enable_all_nmode_input();
}

function uiset_section_loadMode()
{
    document.getElementById("id_80211_mode").innerHTML = "";
    if(gv_band[wlIndex] == "1")
    {
        //5G
        document.getElementById("id_80211_mode")[0] = new Option("_(5GHz (A,N,AC))_", "6");
        document.getElementById("id_80211_mode")[1] = new Option("_(5GHz (A,N))_", "7");
        uiset_section_amode();
    }
    else
    {
        //2.4G
        document.getElementById("id_80211_mode")[0] = new Option("_(Compatible Mode (802.11b, 802.11g, and 802.11n))_", "0");
        document.getElementById("id_80211_mode")[1] = new Option("_(Balanced Mode (802.11n+g only))_", "1");
        document.getElementById("id_80211_mode")[2] = new Option("_(Performance Mode (802.11n only))_", "2");
        document.getElementById("id_80211_mode")[3] = new Option("_(Legacy Mode (802.11b+g only))_", "3");
        document.getElementById("id_80211_mode")[4] = new Option("_(802.11g only)_", "4");
        document.getElementById("id_80211_mode")[5] = new Option("_(802.11b only)_", "5");      
        uiset_section_gmode();
    }
}

function uiset_section_width()
{
    var flag = 0;
    document.getElementById("id_channel_width").innerHTML = "";

    if(gv_band[wlIndex] == "1" && gv_vmode == "1")
    {
        document.getElementById("id_channel_width")[0] = new Option("_(20 MHz)_", "0");
        document.getElementById("id_channel_width")[1] = new Option("_(40 MHz)_", "1");
        document.getElementById("id_channel_width")[2] = new Option("_(80 MHz)_", "3");
    }
    else if(gv_nmode == "off")
    {
        document.getElementById("id_channel_width")[0] = new Option("_(20 MHz)_", "0");
    }
    else
    {
        document.getElementById("id_channel_width")[0] = new Option("_(20 MHz)_", "0");
        if (gv_band[wlIndex] == "2")
        {
            document.getElementById("id_channel_width")[1] = new Option("_(20/40 MHz)_", "2");
        }
        else
        {
            document.getElementById("id_channel_width")[1] = new Option("_(40 MHz)_", "1");
        }
    }

    /* mark selected */
    for (var i=0; i<document.getElementById("id_channel_width").length; i++)
    {
        if (document.getElementById("id_channel_width").options[i].value == gv_nbwcap)
        {
            document.getElementById("id_channel_width").options[i].selected = true;
            flag = 1;
            break;
        }
    }
    if(flag == 0)
    {
        if(gv_band[wlIndex] == "2" && gv_nbwcap == "1")
	{
            document.getElementById("id_channel_width").options[1].selected = true;
            gv_nbwcap = document.getElementById("id_channel_width").options[1].value;
        }
        else
        {
            document.getElementById("id_channel_width").options[0].selected = true;
            gv_nbwcap = document.getElementById("id_channel_width").options[0].value;
        }
    }
}

function uiset_section_control_channel()
{
    var flag = 0;
    document.getElementById("id_control_channel").innerHTML = "";

    if((gv_nbwcap == "1" || gv_nbwcap == "2") && gv_nmode != "off")
    {
        document.getElementById("id_control_channel")[0] = new Option("_(Lower)_", "-1");
        document.getElementById("id_control_channel")[1] = new Option("_(Upper)_", "1");
    }
    else
    {
        document.getElementById("id_control_channel")[0] = new Option("_(None)_", "0");
    }

    /* mark selected */
    for (var i=0; i<document.getElementById("id_control_channel").length; i++)
    {
        if (document.getElementById("id_control_channel").options[i].value == gv_nCtrlsb)
        {
            document.getElementById("id_control_channel").options[i].selected = true;
            flag = 1;
            break;
        }
    }
    if(flag == 0)
    {
        document.getElementById("id_control_channel").options[0].selected = true;
        gv_nCtrlsb = document.getElementById("id_control_channel").options[0].value;
    }
}

  function uiset_section_amsdu()
  {
      if(gv_amsdu=="auto")
      {
          document.getElementById("id_msdu_agg").selectedIndex = 0;
      }
      else
      {
          document.getElementById("id_msdu_agg").selectedIndex = 1;
      }
  }

  function uiset_section_ampdu()
  {
      if(gv_ampdu=="auto")
      {
          document.getElementById("id_mpdu_agg").selectedIndex = 0;
      }
      else
      {
          document.getElementById("id_mpdu_agg").selectedIndex = 1;
      }
  }

  function uiset_section_wme()
  {
      if (gv_wme == "1")
      { //On
          document.getElementById("id_wmm_on").checked  = true;
          document.getElementById("id_wmm_off").checked = false;
      }
      else
      {
          document.getElementById("id_wmm_on").checked  = false;
          document.getElementById("id_wmm_off").checked = true;
      }
  }

  function uiset_section_wmeApsd()
  {
      if (gv_wmeApsd == "1")
      { //Save
          document.getElementById("id_wmm_powersave_enable").checked  = true;
          document.getElementById("id_wmm_powersave_disable").checked = false;
      }
      else
      {
          document.getElementById("id_wmm_powersave_enable").checked  = false;
          document.getElementById("id_wmm_powersave_disable").checked = true;
      }
  }

function uiset_section_channel()
{
    var ch_list;
    var tmp;
    var flag = 0;
    var cmb_channel = document.getElementById("id_channel");

    document.getElementById("currentchannel").innerHTML = "_(Current Channel:)_ "+gv_currentchannel;
    if(gv_band[wlIndex] == "1")
    {
        if (gv_nbwcap == "0") //5g+20M
        {
            ch_list="36,40,44,48,149,153,157,161,165";
        }
        else if (gv_nbwcap == "1")
        {
            if (gv_nCtrlsb == "-1") //5g+40M+lower
            {
                ch_list="36,44,149,157";
            }
            else //5g+40M+lower+upper
            {
                ch_list="40,48,153,161";
            }
        }
        else //5g+80M
        {
            ch_list="36,40,44,48,149,153,157,161";
        }
    }
    else
    {
        if (gv_nbwcap == "0") //2g+20M
        {
            ch_list="1,2,3,4,5,6,7,8,9,10,11";
        }
        else if (gv_nbwcap == "1" || gv_nbwcap == "2")
        {
            if (gv_nCtrlsb == "-1") //2g+40M+lower
            {
                ch_list="1,2,3,4,5,6,7";
            }
            else //2g+40M+upper
            {
                ch_list="5,6,7,8,9,10,11";
            }
        }
    }
     tmp=ch_list.split(",");

    /* load list */
    document.getElementById("id_channel").options.length = 0 ;

    if(gv_band[wlIndex] == "1")
    {
        cmb_channel.options.add(new Option("_(Initial Channel Selection only)_","-2"));
    }
    else
    {
        cmb_channel.options.add(new Option("_(Initial Channel Selection only)_","-2"));
        cmb_channel.options.add(new Option("_(Scheduled Channel Selection)_","-1"));
    }
    cmb_channel.options.add(new Option("_(Auto Detect)_","0"));
    for(var i=0;i<tmp.length;i++)
    {
        cmb_channel.options.add(new Option(tmp[i],tmp[i]));
    }

    if(gv_channel == "0")
    {
        if(gv_runTimeAcs == "0")
        {
            cmb_channel.value = "-2";
        }
        else if(gv_band[wlIndex] == "2" && gv_runTimeAcs == "1" && gv_dfsReEntry == "1")
        {
            cmb_channel.value = "-1";
        }
        else
        {
            cmb_channel.value = "0";
        }
        flag = 1;
    }
    else
    {
        for(i=0;i<document.getElementById("id_channel").options.length;i++)
        {
            if (document.getElementById("id_channel").options[i].value == gv_channel)
            {
                document.getElementById("id_channel").options[i].selected = true;
                flag = 1;
                break;
            }
        }
    }

    if(flag == 0)
    {
        alert("_(You need re-select channel!)_", 0);
        document.getElementById("id_channel")[0].selected = true;
        gv_channel = "0";
        gv_runTimeAcs = "1";
    }
}

  function uiset_section_dfsReEntry()
  {
      if (gv_dfsReEntry == 1)
      { //On
          document.getElementById("id_dfsReEntry_on").checked  = true;
          document.getElementById("id_dfsReEntry_off").checked = false;
      }
      else
      {
          document.getElementById("id_dfsReEntry_on").checked  = false;
          document.getElementById("id_dfsReEntry_off").checked = true;
      }

      document.getElementById("id_dfsHour").value = gv_dfsHour;
      document.getElementById("id_dfsMin").value = gv_dfsMin;
      document.getElementById("id_dfsSec").value =  gv_dfsSec;

      if(gv_channel == "0" && gv_runTimeAcs == "1")
      {
          if(gv_band[wlIndex] != "1")
          {
              document.getElementById("id_dfs").style.display = "none";
          }
          else
              document.getElementById("id_dfs").style.display = "";
          if (gv_dfsReEntry == 1)
          {
              document.getElementById("id_dfsTimer").style.display = "";
          }
          else
          {
              document.getElementById("id_dfsTimer").style.display = "none";
          }
      }
      else
      {
          document.getElementById("id_dfs").style.display = "none";
          document.getElementById("id_dfsTimer").style.display = "none";
      }
  }

  //
  function uiset_section_txpower()
  {
      document.getElementById("id_power_level").selectedIndex = 10 - (gv_txPwrPcnt/10);
      //wlTxPower.selectedIndex = ((gv_txPwrPcnt/20) -1);
  }

  function uiset_section_all()
  {
      uiset_section_wlIndex();
      uiset_section_loadMode();
      uiset_section_width();
      uiset_section_control_channel();
      uiset_section_amsdu();
      uiset_section_ampdu();
      uiset_section_wme();
      uiset_section_wmeApsd();
      uiset_section_channel();
      uiset_section_dfsReEntry();
      uiset_section_txpower();
  }

  function disable_input_all()
  {
      document.getElementById("id_state_enable").disabled = true;
      document.getElementById("id_state_disable").disabled = true;

      document.getElementById("id_input_pin").disabled = true;
      document.getElementById("id_pbc_radio").disabled = true;
      document.getElementById("id_pin_radio").disabled = true;
  }

  function onSelectWlIndex()
  {
      if (document.getElementById("id_wl_2").checked)
      {
          wlIndex = "0";
      }
      else if (document.getElementById("id_wl_5").checked)
      {
          wlIndex = "1";
      }

      init_orig_vars();
      uiset_section_all();
  }

//Change Mode.
function onSelectMode()
{
    var mode = document.getElementById("id_80211_mode").value;

    if(mode == "6")
    {
        gv_vmode = "1";
        gv_nmode = "auto";
    }
    else if(mode == "7")
    {
        gv_vmode = "0";
        gv_nmode = "auto";
    }
    else if(mode == "0")
    {
        gv_nmode = "auto";
        gv_nreqd = "0";
        gv_gmode = "1";
    }
    else if(mode == "1")
    {
        gv_nmode = "auto";
        gv_nreqd = "0";
        gv_gmode = "2";
    }
    else if(mode == "3")
    {
        gv_nmode = "off";
        gv_nreqd = "0";
        gv_gmode = "1";
    }
    else if(mode == "2")
    {
        gv_nmode = "auto";
        gv_nreqd = "1";
        gv_gmode = "1";
    }
    else if(mode == "4")
    {
        gv_nmode = "off";
        gv_nreqd = "0";
        gv_gmode = "2";
    }
    else if(mode == "5")
    {
        gv_nmode = "off";
        gv_nreqd = "0";
        gv_gmode = "0";
    }
    uiset_section_all();
}

//Change bandwidth.
function onSelectBwcap()
{
    gv_nbwcap = document.getElementById("id_channel_width").value;
    uiset_section_all();
}

  function onSelectNctrlsb()
  {
	   gv_nCtrlsb = document.getElementById("id_control_channel").value;
      uiset_section_all();
  }

  ////On's
  function onChangeChannel()
  {
      gv_channel = document.getElementById("id_channel").value;
      if(gv_channel == "-2")
      {
          gv_runTimeAcs = "0";
          gv_channel = "0";
          if(gv_band[wlIndex] == "2")
              gv_dfsReEntry = "0";
      }
      else if(gv_channel == "-1")
      {
          gv_runTimeAcs = "0";
          gv_channel = "0";
          if(gv_band[wlIndex] == "2")
          {
              gv_dfsReEntry = "1";
              gv_runTimeAcs = "1";
          }
      }
      else if(gv_channel == "0")
      {
          gv_runTimeAcs = "1";
          if(gv_band[wlIndex] == "2")
              gv_dfsReEntry = "0";
      }
      else
      {
          gv_runTimeAcs = "0";
          if(gv_band[wlIndex] == "2")
              gv_dfsReEntry = "0";
      }
      uiset_section_all();
  }

  function onSelectAmsdu()
  {
      if(document.getElementById("id_msdu_agg").selectedIndex == 0)
      {
          gv_amsdu="auto";
      }
      else if(document.getElementById("id_msdu_agg").selectedIndex == 1)
      {
          gv_amsdu="0";
      }
      uiset_section_all();
  }

  function onSelectAmpdu()
  {
      if(document.getElementById("id_mpdu_agg").selectedIndex == 0)
      {
          gv_ampdu="auto";
      }
      else if(document.getElementById("id_mpdu_agg").selectedIndex == 1)
      {
          gv_ampdu="0";
      }
      uiset_section_all();
  }

  function onClickWme()
  {
      if (document.getElementById("id_wmm_on").checked)
      {
          gv_wme = "1";
      }
      else if (document.getElementById("id_wmm_off").checked)
      {
          gv_wme = "0";
      }
      uiset_section_all();
  }

  function onClickWmeApsd()
  {
      if (document.getElementById("id_wmm_powersave_enable").checked)
      {
          gv_wmeApsd = "1";
      }
      else if (document.getElementById("id_wmm_powersave_disable").checked)
      {
          gv_wmeApsd = "0";
      }
      uiset_section_all();
  }

  function onClickDfsReEntry()
  {
      if (document.getElementById("id_dfsReEntry_on").checked)
      {
          gv_dfsReEntry = "1";
      }
      else if (document.getElementById("id_dfsReEntry_off").checked)
      {
          gv_dfsReEntry = "0";
      }
      uiset_section_all();
  }

  function onSlctHour()
  {
      gv_dfsHour = document.getElementById("id_dfsHour").value;
      gv_maintWindowStart = gv_dfsHour + ":" + gv_dfsMin + ":" + gv_dfsSec;
      uiset_section_all();
  }

  function onSlctMin()
  {
      gv_dfsMin = document.getElementById("id_dfsMin").value;
      gv_maintWindowStart = gv_dfsHour + ":" + gv_dfsMin + ":" + gv_dfsSec;
      uiset_section_all();
  }

  function onSlctSecond()
  {
      gv_dfsSec = document.getElementById("id_dfsSec").value;
      gv_maintWindowStart = gv_dfsHour + ":" + gv_dfsMin + ":" + gv_dfsSec;
      uiset_section_all();
  }

  function onChangeTxPower()
  {
      gv_txPwrPcnt = (10 - document.getElementById("id_power_level").selectedIndex) * 10;
      uiset_section_all();
  }

  function do_load()
  {
      htmlDecode();
      if (has_QTN == "0")
      {
          wlIndex = "0";
      }
      init_orig_vars();
      uiset_section_all();
      //highlight the button after user click on it
      side_nav("channel");
  }

  function do_rescan()
  {
      var lochead = 'wirelesssetup_advanced.wl?';
      var loc = '';
      if( oldchannel == "0" && oldRunTimeAcs == "1")
      {
          loc += 'wlSetBandMode='+wlIndex;
		    loc += '&sessionKey=' + sessionKey;
          loc += '&ChannelRescanSlct=1';
          lochead += loc;
          postSubmit(lochead);
      }
      else
      {
          if(confirm("_(Re-scan channel need set channel Auto Detect, click OK to continue.)_") )
          {
              loc += 'wlSetBandMode='+wlIndex;
              if(wlIndex == "1")
              {
                  loc += '&wlquantenna_radio_setup=1';
              }
              loc += '&wlChannel=0';
			     loc += '&sessionKey=' + sessionKey;
              loc += '&ChannelRescanSlct=2';
              lochead += loc;
              postSubmit(lochead);
          }
      }
  }

function do_add_elements()
{
    var form = document.forms[0];
    var i=0;
    var loc="";
    var radio_beg;
    var radio_end;

    for(i=0;i<form.elements.length;i++)
    {
        if(form.elements[i].value == "radio_beg_"+wlIndex)
        {
            radio_beg = i;
        }
        else if(form.elements[i].value == "radio_end_"+wlIndex)
        {
            radio_end = i;
            break;
        }
    }

    for(i=radio_beg+1;i<radio_end;i++)
    {
        if(form.elements[i].type == "hidden" && form.elements[i].disabled == false)
        {
            loc+="&";
            loc+=form.elements[i].name;
            loc+="=";
            loc+=form.elements[i].value;
        }
    }
    return loc;
}

  function do_submit()
  {
      var lochead='wirelesssetup_advanced.wl?';
      var loc="";
      var key = '<%ejGetOther(encrypt_key, 0)%>';

      loc += 'wlSetBandMode='+wlIndex;
      loc += do_add_elements();
      //loc += '&wlAbsAction=' + abs_action;
      loc += '&sessionKey=' + sessionKey;
      loc += '&needthankyou=1';
      //alert('loc='+loc);
      //return false;
      loc=encrypt_query(loc,key);
      lochead+=loc;
      // var code = 'location="' + lochead + '"';
      //eval(code);
      postSubmit(lochead);
      //     form.submit();
      return true;
  }

  function do_apply()
  {
      var form = document.forms[0];
      var i = wlIndex;

      if (gv_ap_status[i]!="1" )
      {
          alert("_(Please turn wireless on first.)_");
          return false;
      }

      if (gv_ampdu == "auto" && gv_amsdu == "auto")
      {
          alert("_(Error: only one kind of aggregation can be enabled at a time.)_");
          return;
      }

      if(gv_band[i] == "1")
      {
          if(document.getElementById("uiPostvMode_"+i).value != gv_vmode)
          {
               abs_action = "2";
          }
          document.getElementById("uiPostvMode_"+i).value = gv_vmode;
      }
      else
      {
          if(document.getElementById("uiPostbgMode_"+i).value != gv_gmode)
          {
               abs_action = "2";
          }
          document.getElementById("uiPostbgMode_"+i).value = gv_gmode;
      }

      if(document.getElementById("uiPostnMode_"+i).value != gv_nmode ||
         document.getElementById("uiPostnReqd_"+i).value != gv_nreqd)
      {
           abs_action = "2";
      }
      document.getElementById("uiPostnMode_"+i).value = gv_nmode;
      document.getElementById("uiPostnReqd_"+i).value = gv_nreqd;
      document.getElementById("uiPostnBwCap_"+i).value= gv_nbwcap;
      document.getElementById("uiPostnCtrlsb_"+i).value= gv_nCtrlsb;
      document.getElementById("uiPostampdu_"+i).value= gv_ampdu ;
      document.getElementById("uiPostamsdu_"+i).value= gv_amsdu;
      document.getElementById("uiPostWme_"+i).value = gv_wme;
      document.getElementById("uiPostWmeApsd_"+i).value = gv_wmeApsd;
      document.getElementById("uiPostChannel_"+i).value = gv_channel;
      document.getElementById("uiPostRunTimeAcs_"+i).value = gv_runTimeAcs;
      if(gv_channel == "0")
      {
          document.getElementById("uiPostDfsReEntry_"+i).value = gv_dfsReEntry;
          document.getElementById("uiPostDfsReEntryStartTime_"+i).value = gv_maintWindowStart;
      }
      else
      {
          document.getElementById("uiPostDfsReEntry_"+i).value = "0";
      }
      document.getElementById("uiPostTxPwrPcnt_"+i).value = gv_txPwrPcnt;

      document.getElementById("id_80211_mode").disable = true;
      disable_all_nmode_input();
      document.getElementById("id_wmm_on").disabled = true;
      document.getElementById("id_wmm_off").disabled = true;
      document.getElementById("id_wmm_powersave_enable").disabled = true;
      document.getElementById("id_wmm_powersave_disable").disabled = true;
      document.getElementById("id_channel").disabled = true;
      document.getElementById("id_dfsReEntry_on").disabled = true;
      document.getElementById("id_dfsReEntry_off").disabled = true;
      document.getElementById("id_dfsHour").disable = true;
      document.getElementById("id_dfsMin").disable = true;
      document.getElementById("id_dfsSec").disable = true;
      document.getElementById("id_power_level").disabled = true;

      do_submit();
      return true;
  }

function dom_load(){ do_load(); }

  </script>
</head>

<body>
<div id="wrapper">
  <!-- TOP NAV -->
  <%ejInclude(top_btn_nav3.html)%>
  <!-- END TOP NAV -->
  <!-- SIDE NAV -->
  <%ejInclude(wireless_left.html)%>
  <!-- END SIDE NAV -->
  <!-- MAIN CONTENT AREA -->
        <div id="content_right">
          <div id="content_right_header"></div>
           <div id="content_right_contentarea">
              <h1 class="wirelesssetup_basic">_(Advanced Settings)_</h1>
                <form name="mainform" action="wirelesssetup_advanced.wl" method="POST" onSubmit="return do_apply();">

                  <input type="hidden" name="radio_beg_0"    value="radio_beg_0"  id="radio_beg_0">
                  <input type="hidden" name="wlgMode_wl0" value="<%ejGetWl(wlgMode_wl0)%>" id="uiPostbgMode_0">
                  <input type="hidden" name="wlNmode_wl0" value="<%ejGetWl(wlNmode_wl0)%>" id="uiPostnMode_0">
                  <input type="hidden" name="wlNReqd_wl0" value="<%ejGetWl(wlNReqd_wl0)%>" id="uiPostnReqd_0">
                  <input type="hidden" name="wlNBwCap_wl0" value="<%ejGetWl(wlNBwCap_wl0)%>" id="uiPostnBwCap_0">
                  <input type="hidden" name="wlCountry_wl0" value="<%ejGetWl(wlCountry_wl0)%>" id="uiPostCountry_0">
                  <input type="hidden" name="wlNCtrlsb_wl0" value="<%ejGetWl(wlNCtrlsb_wl0)%>" id="uiPostnCtrlsb_0">
                  <input type="hidden" name="wlAmpdu_wl0" value="<%ejGetWl(wlAmpdu_wl0)%>" id="uiPostampdu_0">
                  <input type="hidden" name="wlAmsdu_wl0" value="<%ejGetWl(wlAmsdu_wl0)%>" id="uiPostamsdu_0">
                  <input type="hidden" name="wlWme_wl0" value="<%ejGetWl(wlWme_wl0)%>" id="uiPostWme_0">
                  <input type="hidden" name="wlWmeApsd_wl0" value="<%ejGetWl(wlWmeApsd_wl0)%>" id="uiPostWmeApsd_0">
                  <input type="hidden" name="wlChannel_wl0" value="<%ejGetWl(wlChannel_wl0)%>" id="uiPostChannel_0">
                  <input type="hidden" name="wlRunTimeAutoChannel_wl0v0" value="<%ejGetWl(wlRunTimeAutoChannel_wl0v0)%>" id="uiPostRunTimeAcs_0">
                  <input type="hidden" name="wlDfsReEntry_wl0" value="<%ejGetWl(wlDfsReEntry_wl0)%>" id="uiPostDfsReEntry_0">
                  <input type="hidden" name="wlDfsReEntryStartTime_wl0" value="<%ejGetWl(wlDfsReEntryStartTime_wl0)%>" id="uiPostDfsReEntryStartTime_0">
                  <input type="hidden" name="wlTxPwrPcnt_wl0" value="<%ejGetWl(wlTxPwrPcnt_wl0)%>" id="uiPostTxPwrPcnt_0">
                  <input type="hidden" name="wlSyncNvram_wl0" value="1" id="uiPostwlSyncNvram_0">
                  <input type="hidden" name="radio_end_0"    value="radio_end_0"  id="radio_end_0">

                  <input type="hidden" name="radio_beg_1"    value="radio_beg_1"  id="radio_beg_1">
                  <input type="hidden" name="wlquantenna_radio_setup"        value="1" id="uiPostRadio/Setup">
                  <input type="hidden" name="wlVmode_wl1" value="<%ejGetWl(wlVmode_wl1)%>" id="uiPostvMode_1">
                  <input type="hidden" name="wlNmode_wl1" value="<%ejGetWl(wlNmode_wl1)%>" id="uiPostnMode_1">
                  <input type="hidden" name="wlNReqd_wl1" value="<%ejGetWl(wlNReqd_wl1)%>" id="uiPostnReqd_1">
                  <input type="hidden" name="wlNBwCap_wl1" value="<%ejGetWl(wlNBwCap_wl1)%>" id="uiPostnBwCap_1">
                  <input type="hidden" name="wlCountry_wl1" value="<%ejGetWl(wlCountry_wl1)%>" id="uiPostCountry_1">
                  <input type="hidden" name="wlNCtrlsb_wl1" value="<%ejGetWl(wlNCtrlsb_wl1)%>" id="uiPostnCtrlsb_1">
                  <input type="hidden" name="wlAmpdu_wl1" value="<%ejGetWl(wlAmpdu_wl1)%>" id="uiPostampdu_1">
                  <input type="hidden" name="wlAmsdu_wl1" value="<%ejGetWl(wlAmsdu_wl1)%>" id="uiPostamsdu_1">
                  <input type="hidden" name="wlWme_wl1" value="<%ejGetWl(wlWme_wl1)%>" id="uiPostWme_1">
                  <input type="hidden" name="wlWmeApsd_wl1" value="<%ejGetWl(wlWmeApsd_wl1)%>" id="uiPostWmeApsd_1">
                  <input type="hidden" name="wlChannel_wl1" value="<%ejGetWl(wlChannel_wl1)%>" id="uiPostChannel_1">
                  <input type="hidden" name="wlRunTimeAutoChannel_wl1v0" value="<%ejGetWl(wlRunTimeAutoChannel_wl1v0)%>" id="uiPostRunTimeAcs_1">
                  <input type="hidden" name="wlDfsReEntry_wl1" value="<%ejGetWl(wlDfsReEntry_wl1)%>" id="uiPostDfsReEntry_1">
                  <input type="hidden" name="wlDfsReEntryStartTime_wl1" value="<%ejGetWl(wlDfsReEntryStartTime_wl1)%>" id="uiPostDfsReEntryStartTime_1">
                  <input type="hidden" name="wlTxPwrPcnt_wl1" value="<%ejGetWl(wlTxPwrPcnt_wl1)%>" id="uiPostTxPwrPcnt_1">
                  <input type="hidden" name="wlSyncNvram_wl1" value="1" id="uiPostwlSyncNvram_1">
                  <input type="hidden" name="radio_end_1"    value="radio_end_1"  id="radio_end_1">

                 <input type="hidden" name="needthankyou" value="1" >

                    <p>_(The modem supports high-speed wireless devices using the 802.11b/g/n and 802.11a/n/ac protocols for the two radios. Enable and tune 802.11a/b/g/n/ac parameters as appropriate.)_ </p>

        <table width="85%" border="0" cellpadding="0" cellspacing="0"  style="margin:0 auto;">
          <tr>
            <td width="35%" style="text-align:left"><strong>_(Frequency)_</strong></td>
            <td width="10%" style="text-align:left"><input name="wireless_index" id="id_wl_5" type="radio" onClick="onSelectWlIndex();" />
             _(5G)_ </td>
            <td width="55%" style="text-align:left"><input name="wireless_index" id="id_wl_2" type="radio" onClick="onSelectWlIndex();" />
             _(2.4G)_ </td>
          </tr>
        </table>
        <div id="id_wl_settings">
        <table width="85%" border="0" cellpadding="0" cellspacing="0"  style="margin:0 auto;">
          <tr>
            <td width="25%" style="text-align:left"><strong>_(Compatibility Mode)_</strong></td>
              <td width="75%" style="text-align:left">
                 <select name="80211bg_mode" id="id_80211_mode" onchange="onSelectMode();">
                    <option id="id_bgn" >_(Compatible Mode (802.11b, 802.11g, and 802.11n))_</option>
                    <option id="id_ng" >_(Balanced Mode (802.11n+g only))_</option>
                    <option id="id_n" >_(Performance Mode (802.11n only))_</option>
                    <option id="id_bg" >_(Legacy Mode (802.11b+g only))_</option>
                    <option id="id_g" >_(802.11g only)_</option>
                    <option id="id_b" >_(802.11b only)_</option>
                </select>
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(Channel Width)_</strong></td>
            <td style="text-align:left">
                    <select name="channel_width" id="id_channel_width" onchange="onSelectBwcap();">
                        <option id="id_20M">20 _(MHz)_</option>
                        <option id="id_40M">40 _(MHz)_</option>
                    </select>
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(Control Channel)_</strong></td>
            <td style="text-align:left">
                    <select name="control_channel" id="id_control_channel" onchange="onSelectNctrlsb();">
                        <option value="0" id="id_None">_(None (20 MHz channel width only))_</option>
                        <option value="-1" id="id_Lower">_(Lower)_</option>
                        <option value="1" id="id_Upper">_(Upper)_</option>
                    </select>
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(MSDU Aggregation)_</strong></td>
            <td style="text-align:left">
                    <select name="msdu_agg" id="id_msdu_agg" onchange="onSelectAmsdu();">
                        <option id="id_sdu_enabled">_(MSDU Aggregation Enabled)_</option>
                        <option id="id_sdu_disabled">_(MSDU Aggregation Disabled)_</option>
                    </select>
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(MPDU Aggregation)_</strong></td>
            <td style="text-align:left">
                    <select name="mpdu_agg" id="id_mpdu_agg" onchange="onSelectAmpdu();">
                        <option id="id_pdu_enabled">_(MPDU Aggregation Enabled)_</option>
                        <option id="id_pdu_disabled">_(MPDU Aggregation Disabled)_</option>
                    </select>
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(WMM)_</strong></td>
            <td style="text-align:left">
            <input name="wmm" id="id_wmm_on" type="radio" value="on" onclick="onClickWme();" checked="checked" />
        _(Enable)_ &nbsp;&nbsp;&nbsp;
            <input name="wmm" id="id_wmm_off" type="radio" value="off" onclick="onClickWme();" />
            _(Disable)_
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(WMM Power Save)_</strong></td>
            <td style="text-align:left">
        <input name="wmm_powersave" id="id_wmm_powersave_enable" type="radio" value="enabled" onclick="onClickWmeApsd();" checked="checked" />
        _(Enable)_ &nbsp;&nbsp;&nbsp;
        <input name="wmm_powersave" id="id_wmm_powersave_disable" type="radio" value="disabled" onclick="onClickWmeApsd();" />
        _(Disable)_
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(Channel)_</strong></td>
            <td style="text-align:left;padding:0px">
           <table width="100%" border="0" cellpadding="0" cellspacing="0"  style="margin:0 auto;padding:0px;">
            <tr>
            <td style="text-align:left;padding:5px">
            <select name="wlChannel" id="id_channel" onchange="onChangeChannel();">
            </select>
            </td>
            <td>
              <a class="button1" onclick="do_rescan();" id="btn_reScan"><span>_(Re-scan)_</span></a>&nbsp;&nbsp;<span id="currentchannel">_(Current Channel:)_11</span>
            </td>
            </tr>
            </table>
            </td>
          </tr>
          <tr id="id_dfs" style="display:none">
            <td style="text-align:left"><strong>_(Scheduled Optimization)_</strong></td>
            <td style="text-align:left">
			<input name="dfsReEntry" id="id_dfsReEntry_on" type="radio" value="on" onclick="onClickDfsReEntry();" checked="checked" />
		_(Enable)_ &nbsp;&nbsp;&nbsp;
	        <input name="dfsReEntry" id="id_dfsReEntry_off" type="radio" value="off" onclick="onClickDfsReEntry();" />
	        _(Disable)_
            </td>
          </tr>
          <tr id="id_dfsTimer" style="display:none">
            <td style="text-align:left"><strong>_(Maintenance Time)_</strong></td>
            <td style="text-align:left">
		       <select name="power_level" id="id_dfsHour" onchange="onSlctHour();">
             <option selected="selected" value="00">00</option>
             <option value="01">01</option>
             <option value="02">02</option>
             <option value="03">03</option>
             <option value="04">04</option>
             <option value="05">05</option>
             <option value="06">06</option>
             <option value="07">07</option>
             <option value="08">08</option>
             <option value="09">09</option>
             <option value="10">10</option>
             <option value="11">11</option>
             <option value="12">12</option>
             <option value="13">13</option>
             <option value="14">14</option>
             <option value="15">15</option>
             <option value="16">16</option>
             <option value="17">17</option>
             <option value="18">18</option>
             <option value="19">19</option>
             <option value="20">20</option>
             <option value="21">21</option>
             <option value="22">22</option>
             <option value="23">23</option>
             </select>
             <strong>:</strong>
		       <select name="power_level" id="id_dfsMin" onchange="onSlctMin();">
             <option selected="selected" value="00">00</option>
             <option value="01">01</option>
             <option value="02">02</option>
             <option value="03">03</option>
             <option value="04">04</option>
             <option value="05">05</option>
             <option value="06">06</option>
             <option value="07">07</option>
             <option value="08">08</option>
             <option value="09">09</option>
             <option value="10">10</option>
             <option value="11">11</option>
             <option value="12">12</option>
             <option value="13">13</option>
             <option value="14">14</option>
             <option value="15">15</option>
             <option value="16">16</option>
             <option value="17">17</option>
             <option value="18">18</option>
             <option value="19">19</option>
             <option value="20">20</option>
             <option value="21">21</option>
             <option value="22">22</option>
             <option value="23">23</option>
             <option value="24">24</option>
             <option value="25">25</option>
             <option value="26">26</option>
             <option value="27">27</option>
             <option value="28">28</option>
             <option value="29">29</option>
             <option value="30">30</option>
             <option value="31">31</option>
             <option value="32">32</option>
             <option value="33">33</option>
             <option value="34">34</option>
             <option value="35">35</option>
             <option value="36">36</option>
             <option value="37">37</option>
             <option value="38">38</option>
             <option value="39">39</option>
             <option value="40">40</option>
             <option value="41">41</option>
             <option value="42">42</option>
             <option value="43">43</option>
             <option value="44">44</option>
             <option value="45">45</option>
             <option value="46">46</option>
             <option value="47">47</option>
             <option value="48">48</option>
             <option value="49">49</option>
             <option value="50">50</option>
             <option value="51">51</option>
             <option value="52">52</option>
             <option value="53">53</option>
             <option value="54">54</option>
             <option value="55">55</option>
             <option value="56">56</option>
             <option value="57">57</option>
             <option value="58">58</option>
             <option value="59">59</option>
             </select>
             <strong>:</strong>
		       <select name="power_level" id="id_dfsSec" onchange="onSlctSecond();">
             <option selected="selected" value="00">00</option>
             <option value="01">01</option>
             <option value="02">02</option>
             <option value="03">03</option>
             <option value="04">04</option>
             <option value="05">05</option>
             <option value="06">06</option>
             <option value="07">07</option>
             <option value="08">08</option>
             <option value="09">09</option>
             <option value="10">10</option>
             <option value="11">11</option>
             <option value="12">12</option>
             <option value="13">13</option>
             <option value="14">14</option>
             <option value="15">15</option>
             <option value="16">16</option>
             <option value="17">17</option>
             <option value="18">18</option>
             <option value="19">19</option>
             <option value="20">20</option>
             <option value="21">21</option>
             <option value="22">22</option>
             <option value="23">23</option>
             <option value="24">24</option>
             <option value="25">25</option>
             <option value="26">26</option>
             <option value="27">27</option>
             <option value="28">28</option>
             <option value="29">29</option>
             <option value="30">30</option>
             <option value="31">31</option>
             <option value="32">32</option>
             <option value="33">33</option>
             <option value="34">34</option>
             <option value="35">35</option>
             <option value="36">36</option>
             <option value="37">37</option>
             <option value="38">38</option>
             <option value="39">39</option>
             <option value="40">40</option>
             <option value="41">41</option>
             <option value="42">42</option>
             <option value="43">43</option>
             <option value="44">44</option>
             <option value="45">45</option>
             <option value="46">46</option>
             <option value="47">47</option>
             <option value="48">48</option>
             <option value="49">49</option>
             <option value="50">50</option>
             <option value="51">51</option>
             <option value="52">52</option>
             <option value="53">53</option>
             <option value="54">54</option>
             <option value="55">55</option>
             <option value="56">56</option>
             <option value="57">57</option>
             <option value="58">58</option>
             <option value="59">59</option>
             </select>
            </td>
          </tr>
          <tr>
            <td style="text-align:left"><strong>_(Wireless Power Level)_</strong></td>
            <td style="text-align:left">
            <select name="power_level" id="id_power_level" onchange="onChangeTxPower();">
              <option value="100">100%
              <option value="90">90%
              <option value="80">80%
              <option value="70">70%
              <option value="60">60%
              <option value="50">50%
              <option value="40">40%
              <option value="30">30%
              <option value="20">20%
              <option value="10">10%
            </select>
            </td>
          </tr>
          </table>
                <p><a class="button1" onclick="do_apply();" id="btn_apply"><span>_(Apply)_</span></a></p>
                <br/>
          </div><!--end of id_wl_settings-->

                </form>
            </div>
            <div id="content_right_footer"></div>
        </div>
        <div class="clear_left"></div>
  <div id="footer">
  </div>
</div>
<SCRIPT LANGUAGE="JavaScript">
var foobar = new domFunction(dom_load);
</SCRIPT>
</body>
</html>
